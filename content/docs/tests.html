<h1 id="whosonfirst-tests">whosonfirst-tests</h1> <p>Testing known-knowns and properties in Who's On First records.</p> <p><em>2017-05-12: This document should be considered a work-in-progress</em></p> <h2 id="types-of-tests">Types of tests</h2> <h3 id="validating-known-knowns-in-whos-on-first">Validating known-knowns in Who's On First</h3> <ul> <li> <p><strong>test_belongsto.js</strong>: A routine test to verify <code>wof:belongsto</code> properties.</p> <ul> <li>This test envokes a list of <code>wof:id</code> values and the known values in that record's <code>wof:belongsto</code> property. This test should be run locally when updating and rebuilding hierarchies to verify that no values are being stripped out of the <code>wof:belongsto</code> property.</li> </ul> </li> <li> <p><strong>test_isparent.js</strong>: A routine test to verify <code>wof:parent_id</code> properties.</p> <ul> <li>This test envokes a list of <code>wof:id</code> values and the known values in that record's <code>wof:parent_id</code> property. This test should be run locally when updating records to verify that no records are incorrectly given a new <code>wof:parent_id</code> value.</li> </ul> </li> </ul> <h3 id="testing-whos-on-first-properties">Testing Who's On First properties</h3> <ul> <li> <p><strong>test_lang_names.js</strong>: A test to ensure a record or set of records has a <code>name:eng_x_preferred</code> property.</p> <ul> <li>This test can be used as a one-off to verify a record has a specified property. As it stands, this test checks for the <code>name:eng_x_preferred</code> property, but can be configured to check of other properties.</li> </ul> </li> <li> <p><strong>test_official_lang_names.js</strong>: A test to ensure a record or set of records has a <code>wof:lang</code> property, as well as a <code>name:[lang]_x_preferred</code> property for the <code>wof:lang</code> value.</p> <ul> <li>This test checks for two separate things in a Who's On First record: <ul> <li>Verifies that a <code>wof:lang</code> property exists and returns the value of that property.</li> <li>Verifies that a record also has a <code>name:[lang]_x_preferred</code> property, where <code>[lang]</code> is equal to the value of the <code>wof:lang</code> property.</li> </ul> </li> </ul> </li> <li> <p><strong>test_superseded_by.js</strong>: A test to validate records' <code>wof:superseded_by</code> and <code>wof:superseded</code> properties, by doing the following:</p> <ul> <li>Checks that a record's (record A) <code>wof:superseded_by</code> value matches the <code>wof:id</code> of an existing record (record B).</li> <li>If so, checks that record B's <code>wof:supersedes</code> property value matches record A's <code>wof:id</code> value.</li> </ul> </li> <li> <p><strong>wk_mismatch</strong>: <em>(in folder)</em> A test to validate records' <code>wk:*</code> properties, by doing the following:</p> <ul> <li>Checks that a record's <code>wk:latitude</code> and <code>wk:longitude</code> values fall within it's parent's geometry.</li> </ul> </li> </ul> <h2 id="see-also">See also</h2> <p><em><a href="https://github.com/whosonfirst">https://github.com/whosonfirst</a></em></p> <p><em><a href="https://github.com/whosonfirst/whosonfirst-json-schema">https://github.com/whosonfirst/whosonfirst-json-schema</a></em></p> <p><em><a href="https://github.com/whosonfirst/py-mapzen-whosonfirst-validator">https://github.com/whosonfirst/py-mapzen-whosonfirst-validator</a></em></p> <p><em><a href="https://github.com/whosonfirst/whosonfirst-www-boundaryissues">https://github.com/whosonfirst/whosonfirst-www-boundaryissues</a></em></p> 
