<h1 id="git-and-large-files">Git and Large Files</h1>
<p>We have started using <a href="https://github.com/github/git-lfs">git-lfs</a> for managing large files in the <code>whosonfirst-data</code> repository. For example, the record for New Zealand which contains a very very very very very detailed coastline geometry exceeds the 100MB filesize limit for any individual file on GitHub.</p>
<p>A full discussion of how to use git-lfs is outside the scope of this document but you can see the current list of files being managed by invoking the git lfs ls-files command, like this:</p>
<pre>
<code>$> cd /usr/local/mapzen/whosonfirst-data
$> git lfs ls-files
65ccc4825e * data/856/333/45/85633345.geojson
</code>
</pre>
<p>When you clone the whosonfirst-data repo the files (managed by git-lfs) only contain metadata, like this:</p>
<pre>
<code>$> cat data/856/333/45/85633345.geojson
version https://git-lfs.github.com/spec/v1
oid sha256:65ccc4825e65c30f00fcebf1f3d57f4385f18a47e3c5e524114a67050186ae48
size 71879893</code>
</pre>
<p>In order to retrieve the contents of the file itself you will need to run <code>git lfs pull</code>, like this:</p>
<pre>
<code>$> git lfs pull
Fetching master
(1 of 1 files) 68.54 MB / 68.55 MB
$> cat data/856/333/45/85633345.geojson
{
"id": 85633345,
"type": "Feature",
"properties": {
"edtf:cessation":"u",
"edtf:inception":"u",
"geom:area":29.187792061074827,
"geom:bbox":"166.426148,-47.289992,178.577244,-33</code>
</pre>
<p>Depending on when you read this we may have already pre-emptively moved <a href="https://github.com/whosonfirst/whosonfirst-data/blob/master/meta/wof-country-latest.csv">all the records for countries</a> in to <code>git-lfs</code>. If the goal is to have details ground truth geometries for every place in the Who's On First gazetteer it stands to reason that most if not all countries will bump up against GitHub's existing file size limits.</p>