<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Who’s On First</title>
        <meta name='description' content="Who's on First is a gazetteer of places.">
        <link rel='apple-touch-icon' href='https://mapzen.com/common/styleguide/images/favicons/apple-touch-icon.png' sizes='180x180'>
        <link rel='icon' type='image/png' href='https://mapzen.com/common/styleguide/images/favicons/favicon-16x16.png' sizes='16x16'>
        <link rel='icon' type='image/png' href='https://mapzen.com/common/styleguide/images/favicons/favicon-32x32.png' sizes='32x32'>
        <link rel='manifest' href='https://mapzen.com/common/styleguide/images/favicons/manifest.json'>
        <link rel='mask-icon' href='https://mapzen.com/common/styleguide/images/favicons/safari-pinned-tab.svg' color='#2C1E3F'>
		
		<link rel="stylesheet" href="../css/bootstrap.min.css">
		<link rel="stylesheet" href="../css/mapzen.whosonfirst.css">
    </head>
	<body>
		<div class="whosonfirst-wrapper">
			<nav class="navbar navbar-default navbar-fixed-top whosonfirst-fixed-subpage-navbar">
				<div class="container">
					<!-- Brand and toggle get grouped for better mobile display -->
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="#">Who's On First</a>
					</div>

					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav navbar-right">
							<li class="whosonfirst-navbar-element-collapsed">
								<a href="#" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed">data</a>
							</li>
							<li class="whosonfirst-navbar-element-collapsed">
								<a href="#" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed whosonfirst-nav-active">docs</a>
							</li>
							<li class="whosonfirst-navbar-element-collapsed">
								<a href="#" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed">tools</a>
							</li>
							<li class="whosonfirst-navbar-element-collapsed">
								<a href="#" class="whosonfirst-nav-link whosonfirst-nav-link-collapsed">blog</a>
							</li>
						</ul>
					</div><!-- /.navbar-collapse -->
				</div><!-- /.container-fluid -->
			</nav>
			<div class="container whosonfirst-subpage-container">
				<div class="row">
					<div class="col-lg-3 col-md-3 col-sm-3 col-xs-0">
						<aside>
							<div class="whosonfirst-sidenav-container">
								<ul class="whosonfirst-sidenav-list">
									<li class="whosonfirst-sidenav-list-element">
										<a href="" class="whosonfirst-nav-link whosonfirst-sidenav-link">data principles</a>
									</li>
									<li class="whosonfirst-sidenav-list-element">
										<a href="" class="whosonfirst-nav-link whosonfirst-sidenav-link">available data</a>
									</li>
									<li class="whosonfirst-sidenav-list-element whosonfirst-sidenav-list-element-secondlevel">
										<a href="" class="whosonfirst-nav-link whosonfirst-sidenav-link">administrative data</a>
									</li>
									<li class="whosonfirst-sidenav-list-element whosonfirst-sidenav-list-element-secondlevel">
										<a href="" class="whosonfirst-nav-link whosonfirst-sidenav-link">venue data</a>
									</li>
									<li class="whosonfirst-sidenav-list-element whosonfirst-sidenav-list-element-secondlevel">
										<a href="" class="whosonfirst-nav-link whosonfirst-sidenav-link">other data</a>
									</li>
									<li class="whosonfirst-sidenav-list-element">
										<a href="" class="whosonfirst-nav-link whosonfirst-sidenav-link">amazon s3</a>
									</li>
									<li class="whosonfirst-sidenav-list-element">
										<a href="" class="whosonfirst-nav-link whosonfirst-sidenav-link  whosonfirst-nav-active">github</a>
									</li>
								</ul>
							</div>
						</aside>
					</div>
					<div class="col-lg-6 col-md-9 col-sm-9 col-xs-12">
						<article>
							<h1 class="whosonfirst-subpage-header">Github</h1>
							<div class="whosonfirst-fulltabs-container">
								<div class="whosonfirst-extrasmall-tabs-menu">
									<div class="whosonfirst-extrasmall-tabs-menu-content">
											<div class="whosonfirst-extrasmall-tabs-menu-content-header">
											<a class="whosonfirst-extrasmall-tab-selection" href="">get started</a>
											<button type="button" class="navbar-toggle collapsed whosonfirst-extrasmall-menu-chevron-down" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2" aria-expanded="false">
												<span id="glyphicon-one" class="glyphicon glyphicon-chevron-down whosonfirst-extrasmall-menu-actual-chevron-down"></span>
											</button>
										</div>
										<div class="collapse" id="bs-example-navbar-collapse-2">
											<div class="whosonfirst-extrasmall-nav-collection">
												<ul class="nav navbar-nav navbar-right whosonfirst-extrasmall-nav">
													<li class="whosonfirst-navbar-element-collapsed whosonfirst-extrasmall-nav-element">
														<a href="#" class="whosonfirst-nav-link whosonfirst-extrasmall-nav-link-collapsed">data principles</a>
													</li>
													<li class="whosonfirst-navbar-element-collapsed whosonfirst-extrasmall-nav-element">
														<a href="#" class="whosonfirst-nav-link whosonfirst-extrasmall-nav-link-collapsed">available data</a>
													</li>
													<li class="whosonfirst-navbar-element-collapsed whosonfirst-extrasmall-nav-element">
														<a href="#" class="whosonfirst-nav-link whosonfirst-extrasmall-nav-link-collapsed whosonfirst-subnav-secondlevel">administrative data</a>
													</li>
													<li class="whosonfirst-navbar-element-collapsed whosonfirst-extrasmall-nav-element">
														<a href="#" class="whosonfirst-nav-link whosonfirst-extrasmall-nav-link-collapsed whosonfirst-subnav-secondlevel">venue data</a>
													</li>
													<li class="whosonfirst-navbar-element-collapsed whosonfirst-extrasmall-nav-element">
														<a href="#" class="whosonfirst-nav-link whosonfirst-extrasmall-nav-link-collapsed whosonfirst-subnav-secondlevel">other data</a>
													</li>
													<li class="whosonfirst-navbar-element-collapsed whosonfirst-extrasmall-nav-element">
														<a href="#" class="whosonfirst-nav-link whosonfirst-extrasmall-nav-link-collapsed">amazon s3</a>
													</li>
													<li class="whosonfirst-navbar-element-collapsed whosonfirst-extrasmall-nav-element  whosonfirst-extrasmall-nav-link-collapsed-last">
														<a href="#" class="whosonfirst-nav-link whosonfirst-extrasmall-nav-link-collapsed whosonfirst-nav-active  whosonfirst-extrasmall-nav-link-collapsed-last">github</a>
													</li>
												</ul>
											</div>
										</div><!-- /.navbar-collapse -->
									</div>
								</div>
								<div class="whosonfirst-tabs-content">
									<p>We haven’t quite figured out what the best way of both distributing the Who’s On First data and of accepting corrections or suggestions from community. Even though the nice people at GitHub continue to do excellent work at making Git easier for a broader population to use, the reality remains that Git is a significant barrier to participation for many people.</p>
									<p>Absent a more formal decision about an alternative, GitHub at least allows us to point in the general direction of:</p>
									<ul>
										<li>An open and readily distributed dataset that people can download and work with.</li>
										<li>A way for people to contribute corrections (and general nuance) about a place.</li>
										<li>A way for us to be able to do everything above while still assuring us a measure of authority around the assertions we make about the data.</li>
										<li>Also a way for us to think about how and where we store an audit trail (of sorts) for updates to a place.</li>
									</ul>
									<p>There are some very real problems working with Who's On First data in Git repositories, still, so it's possible that we will stop using entirely.</p>
									<h2>whosonfirst-data versus whosonfirst-data-SOMETHING repositories</h2>
									<p>There is a lot of data in Who's On First, more than can practically fit in a single GitHub repository. Someday it may be possible but today it is not. To account for this fact Who's On First data has been separated in to a number of different GitHub repositories organized by placetype and region.</p>
									<p>The naming conventions for repositories at their most granular is as follows:</p>
									<pre>whosonfirst-data + "-" + WHOSONFIRST_PLACETYPE + "-" + WHOSONFIRST_COUNTRY + "-" + WHOSONFIRST_SUBDIVISION</pre>
									<p>For Example:</p>
									<ul>
										<li><a href="">whosonfirst-data</a> — administrative data (continents - microhoods) for the world</li>
										<li><a href="">whosonfirst-data-venue-us-ca</a> — venues in California, USA</li>
										<li><a href="">whosonfirst-data-venue-ca</a> — venues in Canada</li>
										<li><a href="">whosonfirst-data-postalcode-fi</a> — postalcodes in Finland</li>
									</ul>
									<p>The first thing to note is that not all repositories are as granular as the rules described above. Wherever feasible we try to bundle records with the least amount of granularity as possible. For example postalcodes are grouped by country as are venues unless there are so many of them, like in the USA, that it is not practical to keep them in a single parent repository.</p>
									<p>If a repository grows so much data that it is no longer practical to keep everything in one place then it may be subdivided in to a number of child repositories. Venues are a good example of this.</p>
									<p>We try to maintain a separate parent repository for things that have been broken out in to multiple child repositories. For example there is a whosonfirst-data-postalcode repository that contains no data but instead a pointer to all the repositories that do have postalcode data. We also do the same for venues in the USA. This practice is still in its early stages so we apologize in advance if it's bumpy or incomplete.</p>
									<p>The whosonfirst-data repository is the obvious exception (or perfect example, depending on how you look at it) to the scenario described above. This repository contains all administrative placetypes (all the places between and inclusive of continents to microhoods) for the entire world. While it is possible to imagine that the sum total of all the neighbourhoods in the world will require putting them in a separate repository but we are going to hold off doing that for as long as we can.</p>
									<p>Who's On First records should always have a wof:repo property indicating the repository to which they belong. If they don't that's a bug.</p>
									<h2>Git and large files</h2>
									<p>We have started using git-lfs for managing large files in the whosonfirst-data repository. For example, the record for New Zealand which contains a very very very very very detailed coastline geometry exceeds the 100MB filesize limit for any individual file on GitHub.</p>
									<p>A full discussion of how to use git-lfs is outside the scope of this document but you can see the current list of files being managed by invoking the git lfs ls-files command, like this:</p>
									<pre>$> cd /usr/local/mapzen/whosonfirst-data
	$> git lfs 
	ls-files 65ccc4825e * data/856/333/45/85633345.geojson</pre>
									<p>When you clone the whosonfirst-data repo the files (managed by git-lfs) only contain metadata, like this:</p>
									<pre>$> cat data/856/333/45/85633345.geojson
	version https://git-lfs.github.com/spec/v1
	oid sha256:65ccc4825e65c30f00fcebf1f3d57f4385f18a47e3c5e524114a67050186ae48
	size 71879893</pre>
									<p>In order to retrieve the contents of the file itself you will need to run git lfs pull, like this:</p>
									<pre>$> git lfs pull
	Fetching master
	(1 of 1 files) 68.54 MB / 68.55 MB
	$> cat data/856/333/45/85633345.geojson
	{
	"id": 85633345,
	"type": "Feature",
	"properties": {
	"edtf:cessation":"u",
	"edtf:inception":"u",
	"geom:area":29.187792061074827,
	"geom:bbox":"166.426148,-47.289992,178.577244,-33</pre>
									<p>Depending on when you read this we may have already pre-emptively moved <a href="">all the records for countries</a> in to git-lfs. If the goal is to have details ground truth geometries for every place in the Who's On First gazetteer it stands to reason that most if not all countries will bump up against GitHub's existing file size limits.</p>
								</div>
							</div>
						</article>
					</div>
					<div class="col-lg-3 col-md-0 col-sm-0 col-xs-0"></div>
				</div>
			</div>
		</div>
		<footer>
			<nav class="navbar navbar-default navbar-bottom">
				<div class="container">
					<!-- Collect the nav links, forms, and other content for toggling -->
					<ul class="nav navbar-nav navbar-right whosonfirst-footer">
						<li class="whosonfirst-nav-link-nounderline whoosonfooter-gig">who's on first is a <a href="#" class="whosonfirst-nav-link whosonfirst-nav-link-innounderline">mapzen</a> gig</li>
						<li><a href="#" class="whosonfirst-nav-link whosonfirst-footer-nav-link">contributing</a></li>
						<li><a href="#" class="whosonfirst-nav-link whosonfirst-footer-nav-link">licensing</a></li>
						<li><a href="#" class="whosonfirst-nav-link whosonfirst-footer-nav-link">github</a></li>
						<li><a href="#" class="whosonfirst-nav-link whosonfirst-footer-nav-link">twitter</a></li>
					</ul>
				</div>
			</nav>
		</footer>
		
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="../javascript/bootstrap.min.js"></script>
		
		<script>
			$(document).ready(function(){
				console.log(123123123);
				$("#bs-example-navbar-collapse-2").on("show.bs.collapse", function(){
					console.log("In here");
					document.getElementById("glyphicon-one").classList.add("glyphicon-chevron-up");
					document.getElementById("glyphicon-one").classList.remove("glyphicon-chevron-down");
				});
				$("#bs-example-navbar-collapse-2").on("hide.bs.collapse", function(){
					document.getElementById("glyphicon-one").classList.add("glyphicon-chevron-down");
					document.getElementById("glyphicon-one").classList.remove("glyphicon-chevron-up");
				});
			});
		</script>
	</body>
</html>