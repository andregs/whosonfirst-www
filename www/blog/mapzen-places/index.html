<div class="container" id="content">
 <div class="row text-center headroom-large hidden-print">
  <div class="col-xs-12">
   <a class="btn btn-default btn-transparent" href="/blog">
    <i class="fa fa-angle-left">
    </i>
    blog
   </a>
  </div>
 </div>
 <div class="row headroom-large">
  <div class="col-md-8 col-md-offset-2">
   <h2 class="no-margin text-center">
    Mapzen Places is here! And there! And everywhere.
   </h2>
   <ul class="tag-list headroom">
    <a href="/tag/places">
     <li>
      places
     </li>
    </a>
    <a href="/tag/flex">
     <li>
      flex
     </li>
    </a>
    <a href="/tag/data">
     <li>
      data
     </li>
    </a>
    <a href="/tag/whosonfirst">
     <li>
      whosonfirst
     </li>
    </a>
   </ul>
   <div class="">
   </div>
   <div class="static-content headroom-large blog-content">
    <p>
     <img src="https://s3.amazonaws.com/mapzen-assets/images/mapzen-places-is-here/map_hats.jpg" alt="map hat pieces">
    </p>
    <p>
     <a href="https://mapzen.com/data/places/">
      Mapzen Places
     </a>
     is here! Find out more about a location, its geometry, its relationships, and return useful metadata, all through a
     <a href="https://mapzen.com/documentation/places/">
      convenient and well-documented API
     </a>
     . Mapzen Places is all based on open data, with licensing suitable for commercial projects. Start using it via
     <a href="https://mapzen.com/pricing/">
      Mapzen Flex
     </a>
     today!
    </p>
    <p>
     If you like plain-text GeoJSON records with stable numeric IDs, a finite set of placetypes, and a common set of ancestors for all records, then Mapzen Places is for you. Perform spatial queries without having to set up and run a spatial database! Get worldwide admin hierarchies from continent to neighbourhood! Records may be updated, superseded or deprecated, but never removed. Mapzen Places also “holds hands” with Wikipedia, Wikidata and other datasets.
    </p>
    <p>
     The Mapzen Places API gets its data from
     <a href="https://whosonfirst.mapzen.com/">
      Who’s On First
     </a>
     , and supersedes the Who’s On First API which we have been beta testing for the past year. Note that
     <code>
      whosonfirst-api.mapzen.com/?
     </code>
     is deprecated but requests will get redirected to
     <code>
      mapzen.places.com/v1/?
     </code>
     . The old
     <code>
      whosonfirst.*
     </code>
     methods will continue to work but are deprecated —
     <code>
      mapzen.*
     </code>
     is the new method.
    </p>
    <p>
     There are
     <a href="https://mapzen.com/documentation/places/methods/">
      many useful methods in the Mapzen Places API
     </a>
     , including
    </p>
    <h3 id="mapzen.places.getdescendants">
     mapzen.places.getDescendants
    </h3>
    <p>
     <a href="https://mapzen.com/documentation/places/methods/#mapzen.places.getDescendants">
      Get descendants of a place
     </a>
     : counties in a country, postal codes in a city, regions in a continent, venues in a neighbourhood.
    </p>
    <p>
     Here’s the API request for neighbourhoods in London:
    </p>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       https://places.mapzen.com/v1/?
method=mapzen.places.getDescendants&amp;
id=101750367&amp;
placetype=neighbourhood&amp;
extras=name
&amp;api_key=INSERT-YOUR-API-KEY
      </code>
     </pre>
    </div>
    <p>
     <em>
      (We’ve broken out the arguments in the URL to make it easier to read –
      <a href="https://places.mapzen.com/v1/?method=mapzen.places.getDescendants&amp;id=101750367&amp;placetype=neighbourhood&amp;extras=name&amp;api_key=INSERT-YOUR-API-KEY">
       here’s a link
      </a>
      , just add your API key.)
     </em>
    </p>
    <p>
     Here’s the response:
    </p>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       places: [
    {
        &#34;wof:id&#34;: &#34;85785187&#34;,
        &#34;wof:parent_id&#34;: &#34;101750367&#34;,
        &#34;wof:name&#34;: &#34;Abbey Wood&#34;,
        &#34;wof:placetype&#34;: &#34;neighbourhood&#34;,
        &#34;wof:country&#34;: &#34;GB&#34;,
        &#34;wof:repo&#34;: &#34;whosonfirst-data&#34;,
        &#34;name&#34;: &#34;&#34;
    },
    {
        &#34;wof:id&#34;: &#34;85785221&#34;,
        &#34;wof:parent_id&#34;: &#34;101750367&#34;,
        &#34;wof:name&#34;: &#34;Acton&#34;,
        &#34;wof:placetype&#34;: &#34;neighbourhood&#34;,
        &#34;wof:country&#34;: &#34;GB&#34;,
        &#34;wof:repo&#34;: &#34;whosonfirst-data&#34;,
        &#34;name&#34;: &#34;&#34;
    }...
      </code>
     </pre>
    </div>
    <p>
     Adding
     <code>
      format=geojson
     </code>
     does what you’d expect:
    </p>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       {
type: &#34;FeatureCollection&#34;,
features: [
    {
        type: &#34;Feature&#34;,
        geometry: {
            type: &#34;Point&#34;,
            coordinates: [
                0.12401,
                51.495463
            ]
        },
        properties: {
            wof&lt;img class=&#39;emoji&#39; title=&#39;id&#39; alt=&#39;id&#39; src=&#39;https://github.global.ssl.fastly.net/images/icons/emoji/id.png&#39; height=&#39;20&#39; width=&#39;20&#39; align=&#39;absmiddle&#39; &gt; 85785187,
            wof:parent_id: &#34;101750367&#34;,
            wof:name: &#34;Abbey Wood&#34;,
            wof:placetype: &#34;neighbourhood&#34;,
            wof:country: &#34;GB&#34;,
            wof:repo: &#34;whosonfirst-data&#34;,
            name: &#34;&#34;,
            geom:latitude: 51.495463,
            geom:longitude: 0.12401,
            lbl:latitude: 51.488981,
            lbl:longitude: 0.11348
     }
 }...
      </code>
     </pre>
    </div>
    <p>
     …as does
     <code>
      format=csv
     </code>
     :
    </p>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       name,wof_country,wof_id,wof_name,wof_parent_id,wof_placetype,wof_repo
,GB,85785187,&#34;Abbey Wood&#34;,101750367,neighbourhood,whosonfirst-data
,GB,85785221,Acton,101750367,neighbourhood,whosonfirst-data
,GB,85785229,Addiscombe,101750367,neighbourhood,whosonfirst-data
,GB,85785259,Aldersbook,101750367,neighbourhood,whosonfirst-data
...
      </code>
     </pre>
    </div>
    <h3 id="mapzen.places.gethierarchiesbylatlon">
     mapzen.places.getHierarchiesByLatLon
    </h3>
    <p>
     Get the
     <a href="https://mapzen.com/documentation/places/methods/#mapzenplacesgethierarchiesbylatlon">
      hierarchy of a place
     </a>
     , from
     <code>
      neighbourhood
     </code>
     or
     <code>
      microhood
     </code>
     up to
     <code>
      country
     </code>
     and
     <code>
      continent
     </code>
     . Here is the hierarchy for a microhood in Bernal Heights, San Francisco:
    </p>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       https://places.mapzen.com/v1/?
method=mapzen.places.getHierarchiesByLatLon&amp;
latitude=37.74
&amp;longitude=-122.42&amp;
api_key=INSERT-YOUR-API-KEY
      </code>
     </pre>
    </div>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       {
hierarchies: [
        {
            microhood_id: &#34;420780693&#34;,
            neighbourhood_id: 85865945,
            continent_id: 102191575,
            country_id: 85633793,
            locality_id: 85922583,
            county_id: 102087579,
            region_id: 85688637
        }
    ],
stat: &#34;ok&#34;
}
      </code>
     </pre>
    </div>
    <p>
     Adding
     <code>
      spr=1&amp;extras=name&amp;
     </code>
     will give you a more detailed response – here’s a snippet of the
     <code>
      neighbourhood
     </code>
     details:
    </p>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       neighbourhood: {
        &#34;wof:id&#34;: 85865945,
        &#34;wof:parent_id&#34;: &#34;85922583&#34;,
        &#34;wof:name&#34;: &#34;Bernal Heights&#34;,
        &#34;wof:placetype&#34;: &#34;neighbourhood&#34;,
        &#34;wof:country&#34;: &#34;US&#34;,
        &#34;wof:repo&#34;: &#34;whosonfirst-data&#34;
    }...
      </code>
     </pre>
    </div>
    <h3 id="mapzen.places.getintersects">
     mapzen.places.getIntersects
    </h3>
    <p>
     Discover
     <a href="https://mapzen.com/documentation/places/methods/#mapzen.places.getIntersects">
      placetypes that intersect a bounding box
     </a>
     – here is the request for counties in
     <code>
      -6.6482,38.2448,-4.8118,39.9779
     </code>
     :
    </p>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       https://places.mapzen.com/v1/?
method=mapzen.places.getIntersects&amp;
min_latitude=-6.6482&amp;
min_longitude=38.2448&amp;
max_latitude=-4.8118&amp;
max_longitude=39.9779&amp;
placetype=county&amp;
api_key=INSERT-YOUR-API-KEY
      </code>
     </pre>
    </div>
    <p>
     a.k.a. coastal Tanzania:
    </p>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       {
  &#34;places&#34;: [
    {
      &#34;wof:id&#34;: 421188197,
      &#34;wof:parent_id&#34;: 85679651,
      &#34;wof:name&#34;: &#34;Kusini&#34;,
      &#34;wof:placetype&#34;: &#34;county&#34;,
      &#34;wof:country&#34;: &#34;TZ&#34;,
      &#34;wof:repo&#34;: &#34;whosonfirst-data&#34;
    },
    {
      &#34;wof:id&#34;: 421191173,
      &#34;wof:parent_id&#34;: 85679651,
      &#34;wof:name&#34;: &#34;Kati&#34;,
      &#34;wof:placetype&#34;: &#34;county&#34;,
      &#34;wof:country&#34;: &#34;TZ&#34;,
      &#34;wof:repo&#34;: &#34;whosonfirst-data&#34;
    }...
      </code>
     </pre>
    </div>
    <p>
     These methods have
     <a href="https://mapzen.com/documentation/places/methods/#arguments_8">
      lots of arguments
     </a>
     , and as noted earlier, can return data in exciting formats such as json, geojson, and csv.
    </p>
    <p>
     If you choose GeoJSON, you can add the API response directly onto a map! In Tangram, here’s how you can use
     <code>
      mapzen.places.getDescendants
     </code>
     to display airports in Africa:
    </p>
    <div class="highlight">
     <pre>
      <code class="language-text" data-lang="text">
       venues:
        type: GeoJSON
        # url: https://whosonfirst-api.mapzen.com/?method=whosonfirst.places.getNearby
        url: https://places.mapzen.com/v1/?
        url_params:
            method: mapzen.places.getDescendants
            id: 102191573 #africa
            api_key: global.sdk_mapzen_api_key
            placetype: campus
            tags: airport
            format: geojson
            per_page: 500
            extras: wof:tags,wof:concordances,mz:is_current,name:eng_x_variant,oa:type,oa:elevation_ft,wof:name
      </code>
     </pre>
    </div>
    <p>
     Note the
     <code>
      extras
     </code>
     — this lets you pull in metadata (in this case, airport codes and airport size that we’ve concorded with OurAirports and ICAO and IATA) that you can use for labels and display.
    </p>
    <div class="demo-wrapper">
     <iframe src="https://mapzen.com/tangram/view/?api=22/1036#2.84/3.73/14.86">
     </iframe>
    </div>
    <p>
     <a href="https://mapzen.com/tangram/view/?api=22/1036#5.605/5.148/3.729">
      Open full screen
     </a>
     , and
     <a href="https://mapzen.com/tangram/play/?api=22/1036#5.605/5.148/3.729">
      check out the scene file
     </a>
     in Tangram Play!
    </p>
    <p>
     You can learn much more on the
     <a href="https://mapzen.com/data/places/">
      Mapzen Places page
     </a>
     and
     <a href="https://mapzen.com/documentation/places/">
      the documentation
     </a>
     . Mapzen Places is part of
     <a href="https://mapzen.com/pricing/">
      Mapzen Flex
     </a>
     , with clear, predictable pricing and a generous free tier. Sign up for
     <a href="https://mapzen.com/developers">
      an API key
     </a>
     to get started!
    </p>
    <p>
     <em>
      Preview image: Sheet printed with parts of map of the world in sections as would be made up into baseball hats. The parts of 4 hats are printed on each sheet. It was designed by Esselte Map Service and company: Interarts and made by Graphic Jackets,  via
      <a href="https://collection.cooperhewitt.org/objects/18635637/">
       Cooper Hewitt
      </a>
      .
     </em>
    </p>
   </div>
   <div class="headroom-large footroom-large text-center hidden-print">
    <div class="social-buttons hidden-print">
     <ul>
      <li class="social-button social-button-twitter">
       <a href="http://twitter.com/home?status=Mapzen Places is here! And there! And everywhere.%20@mapzen%20https://mapzen.com/blog/mapzen-places" class="social-popup" title="Twitter">
        <span class="icon">
         <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" space="preserve">
          <path d="M24.253,8.756C24.689,17.08,18.297,24.182,9.97,24.62c-3.122,0.162-6.219-0.646-8.861-2.32
            c2.703,0.179,5.376-0.648,7.508-2.321c-2.072-0.247-3.818-1.661-4.489-3.638c0.801,0.128,1.62,0.076,2.399-0.155
            C4.045,15.72,2.215,13.6,2.115,11.077c0.688,0.275,1.426,0.407,2.168,0.386c-2.135-1.65-2.729-4.621-1.394-6.965
            C5.575,7.816,9.54,9.84,13.803,10.071c-0.842-2.739,0.694-5.64,3.434-6.482c2.018-0.623,4.212,0.044,5.546,1.683
            c1.186-0.213,2.318-0.662,3.329-1.317c-0.385,1.256-1.247,2.312-2.399,2.942c1.048-0.106,2.069-0.394,3.019-0.851
            C26.275,7.229,25.39,8.196,24.253,8.756z">
          </path>
         </svg>
        </span>
        <span class="sr-only">
         twitter
        </span>
       </a>
      </li>
      <li class="social-button social-button-facebook">
       <a href="https://www.facebook.com/sharer/sharer.php?u=https://mapzen.com/blog/mapzen-places" class="social-popup" title="Facebook">
        <span class="icon">
         <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" space="preserve">
          <path d="M27.825,4.783c0-2.427-2.182-4.608-4.608-4.608H4.783c-2.422,0-4.608,2.182-4.608,4.608v18.434
              c0,2.427,2.181,4.608,4.608,4.608H14V17.379h-3.379v-4.608H14v-1.795c0-3.089,2.335-5.885,5.192-5.885h3.718v4.608h-3.726
              c-0.408,0-0.884,0.492-0.884,1.236v1.836h4.609v4.608h-4.609v10.446h4.916c2.422,0,4.608-2.188,4.608-4.608V4.783z">
          </path>
         </svg>
        </span>
        <span class="sr-only">
         facebook
        </span>
       </a>
      </li>
      <li class="social-button social-button-pinterest">
       <a href="http://pinterest.com/pin/create/button/?url=https://mapzen.com/blog/mapzen-places&amp;media=https://s3.amazonaws.com/mapzen-assets/images/mapzen-places-is-here/map_hats.jpg&amp;description=Mapzen Places is here! And there! And everywhere." class="social-popup" title="Pinterest">
        <span class="icon">
         <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" space="preserve">
          <path d="M14.021,1.57C6.96,1.57,1.236,7.293,1.236,14.355c0,7.062,5.724,12.785,12.785,12.785c7.061,0,12.785-5.725,12.785-12.785
            C26.807,7.294,21.082,1.57,14.021,1.57z M15.261,18.655c-1.161-0.09-1.649-0.666-2.559-1.219c-0.501,2.626-1.113,5.145-2.925,6.458
            c-0.559-3.971,0.822-6.951,1.462-10.116c-1.093-1.84,0.132-5.545,2.438-4.632c2.837,1.123-2.458,6.842,1.099,7.557
            c3.711,0.744,5.227-6.439,2.925-8.775c-3.325-3.374-9.678-0.077-8.897,4.754c0.19,1.178,1.408,1.538,0.489,3.168
            C7.165,15.378,6.53,13.7,6.611,11.462c0.131-3.662,3.291-6.227,6.46-6.582c4.007-0.448,7.771,1.474,8.29,5.239
            c0.579,4.255-1.816,8.865-6.102,8.533L15.261,18.655z">
          </path>
         </svg>
        </span>
        <span class="sr-only">
         pinterest
        </span>
       </a>
      </li>
      <li class="social-button social-button-email">
       <a href="mailto:?subject=Mapzen Places is here! And there! And everywhere.&amp;body=https://mapzen.com/blog/mapzen-places" class="social-popup" title="E-mail">
        <span class="icon">
         <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="28px" height="28px" viewBox="0 0 28 28" enable-background="new 0 0 28 28" space="preserve">
          <g>
           <path d="M20.111 26.147c-2.336 1.051-4.361 1.401-7.125 1.401c-6.462 0-12.146-4.633-12.146-12.265 c0-7.94 5.762-14.833 14.561-14.833c6.853 0 11.8 4.7 11.8 11.252c0 5.684-3.194 9.265-7.399 9.3 c-1.829 0-3.153-0.934-3.347-2.997h-0.077c-1.208 1.986-2.96 2.997-5.023 2.997c-2.532 0-4.361-1.868-4.361-5.062 c0-4.749 3.504-9.071 9.111-9.071c1.713 0 3.7 0.4 4.6 0.973l-1.169 7.203c-0.388 2.298-0.116 3.3 1 3.4 c1.673 0 3.773-2.102 3.773-6.58c0-5.061-3.27-8.994-9.303-8.994c-5.957 0-11.175 4.673-11.175 12.1 c0 6.5 4.2 10.2 10 10.201c1.986 0 4.089-0.43 5.646-1.245L20.111 26.147z M16.646 10.1 c-0.311-0.078-0.701-0.155-1.207-0.155c-2.571 0-4.595 2.53-4.595 5.529c0 1.5 0.7 2.4 1.9 2.4 c1.441 0 2.959-1.828 3.311-4.087L16.646 10.068z">
           </path>
          </g>
         </svg>
        </span>
        <span class="sr-only">
         email
        </span>
       </a>
      </li>
     </ul>
    </div>
   </div>
   <div class="post-meta headroom text-center">
    <div class="byline">
     <span class="byline-date no-top-margin">
      05 October 2017
     </span>
    </div>
    <ul class="author-blurbs clearfix">
     <li class="author-blurb author-blurb-full-width">
      <div class="author-blurb-portrait">
       <a href="https://twitter.com/" class="no-print-link">
        <img class="avatar" src=" https://avatars0.githubusercontent.com/u/5435747 ">
       </a>
      </div>
      <div class="author-blurb-text">
       <span class="byline-author">
        <a href="https://twitter.com/" class="no-print-link">
         Mapzen
        </a>
       </span>
       <p>
        Opening maps with open source and open data.
       </p>
      </div>
     </li>
    </ul>
   </div>
   <div class="pagination headroom hidden-print">
    <a class="pagination-link pagination-previous" href="/blog/icon-import">
     <i class="fa fa-fw fa-angle-left">
     </i>
     <span class="pagination-link-text">
      Remixing the Mapzen Icon Library
     </span>
    </a>
    <a class="pagination-link pagination-next" href="/blog/transitland-historical-feed-versions">
     <i class="fa fa-fw fa-angle-right">
     </i>
     <span class="pagination-link-text">
      Analyzing historical transit service &amp; GTFS publishing practices in Transitland
     </span>
    </a>
   </div>
  </div>
 </div>
</div>
