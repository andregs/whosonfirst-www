<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Mapzen Places is here! And there! And everywhere.</title>
		<meta name="description" content="Who’s on First is a gazetteer of places.">
		
		<link rel="stylesheet" href="/css/bootstrap.min.css">
		<link rel="stylesheet" href="/css/mapzen.whosonfirst.css">
		
		<link rel="stylesheet" href="/css/styles/grayscale.css">

		<meta property="og:type" content="article" />
		<meta property="og:site_name" content="Who's On First" />
		<meta property="og:title" content="Mapzen Places is here! And there! And everywhere." />
		<meta property="og:description" content="Get geometries, hierarchies, statistics and more with the Mapzen Places API." />
		<meta property="og:image" content="images/map_hats.jpg" />
		
		<meta property="twitter:card" value="summary" />
		<meta property="twitter:site" content="@alloftheplaces" />
		<meta property="twitter:creator" content="@alloftheplaces" />
		<meta property="twitter:url" content="https://www.whosonfirst.org/blog/2017/10/05/mapzen-places/" />
		<meta property="twitter:title" content="Mapzen Places is here! And there! And everywhere." />
		<meta property="twitter:description" content="Get geometries, hierarchies, statistics and more with the Mapzen Places API." />
		<meta property="twitter:image" content="/id/images/map_hats.jpg" />
		
		<style type="text/css">
		  body {
		  font-family: serif;
		  margin:2em;
		  margin-left: 10%;
		  margin-right: 10%;
		  font-size: 1.3em;
		  line-height: 1.5em;
		  }

		  img {
		  max-width: 640px !important;
		  max-height: 480px !important;
		  border: 1px dotted #ccc;
		  padding: .5em;
		  margin-bottom:1em;
		  margin-top: 1em;
		  }

		  h2 small {
		  display: block;
		  margin-top:.10em;
		  font-weight: 100;
		  font-size: .5em;
		  }

		  .hey-look {
		  font-weight: 700;
		  }

		  #blog-post {
		  margin-top:2em;
		  margin-bottom:5em;
		  }
		  
		</style>
	</head>
	<body>

	  
	  
	  <h2>
	    Mapzen Places is here! And there! And everywhere.
	    <small>This is a blog post by
	      <span class="hey-look">mapzen</span>
	      that was published on October 05, 2017 
	       and tagged <span class="hey-look">places</span>, <span class="hey-look">flex</span>, <span class="hey-look">data</span> and <span class="hey-look">whosonfirst</span></small>
	  </h2>

	  <div id="blog-post">
<p><img src="images/map_hats.jpg" alt="map hat pieces" /></p>

<p><a href="https://mapzen.com/data/places/">Mapzen Places</a> is here! Find out more about a location, its geometry, its relationships, and return useful metadata, all through a <a href="https://mapzen.com/documentation/places/">convenient and well-documented API</a>. Mapzen Places is all based on open data, with licensing suitable for commercial projects. Start using it via <a href="https://mapzen.com/pricing/">Mapzen Flex</a> today!</p>

<p>If you like plain-text GeoJSON records with stable numeric IDs, a finite set of placetypes, and a common set of ancestors for all records, then Mapzen Places is for you. Perform spatial queries without having to set up and run a spatial database! Get worldwide admin hierarchies from continent to neighbourhood! Records may be updated, superseded or deprecated, but never removed. Mapzen Places also “holds hands” with Wikipedia, Wikidata and other datasets.</p>

<p>The Mapzen Places API gets its data from <a href="https://whosonfirst.mapzen.com/">Who&rsquo;s On First</a>, and supersedes the Who&rsquo;s On First API which we have been beta testing for the past year. Note that <code>whosonfirst-api.mapzen.com/?</code> is deprecated but requests will get redirected to <code>mapzen.places.com/v1/?</code>. The old <code>whosonfirst.*</code> methods will continue to work but are deprecated — <code>mapzen.*</code> is the new method.</p>

<p>There are <a href="https://mapzen.com/documentation/places/methods/">many useful methods in the Mapzen Places API</a>, including</p>

<p>###mapzen.places.getDescendants</p>

<p><a href="https://mapzen.com/documentation/places/methods/#mapzen.places.getDescendants">Get descendants of a place</a>: counties in a country, postal codes in a city, regions in a continent, venues in a neighbourhood.</p>

<p>Here&rsquo;s the API request for neighbourhoods in London:</p>

<pre><code>https://places.mapzen.com/v1/?
method=mapzen.places.getDescendants&amp;
id=101750367&amp;
placetype=neighbourhood&amp;
extras=name
&amp;api_key=INSERT-YOUR-API-KEY
</code></pre>

<p>_(We&rsquo;ve broken out the arguments in the URL to make it easier to read &ndash; <a href="https://places.mapzen.com/v1/?method=mapzen.places.getDescendants&amp;id=101750367&amp;placetype=neighbourhood&amp;extras=name&amp;api_key=INSERT-YOUR-API-KEY">here&rsquo;s a link</a>, just add your API key.)_</p>

<p>Here&rsquo;s the response:</p>

<pre><code>places: [
    {
        &quot;wof:id&quot;: &quot;85785187&quot;,
        &quot;wof:parent_id&quot;: &quot;101750367&quot;,
        &quot;wof:name&quot;: &quot;Abbey Wood&quot;,
        &quot;wof:placetype&quot;: &quot;neighbourhood&quot;,
        &quot;wof:country&quot;: &quot;GB&quot;,
        &quot;wof:repo&quot;: &quot;whosonfirst-data&quot;,
        &quot;name&quot;: &quot;&quot;
    },
    {
        &quot;wof:id&quot;: &quot;85785221&quot;,
        &quot;wof:parent_id&quot;: &quot;101750367&quot;,
        &quot;wof:name&quot;: &quot;Acton&quot;,
        &quot;wof:placetype&quot;: &quot;neighbourhood&quot;,
        &quot;wof:country&quot;: &quot;GB&quot;,
        &quot;wof:repo&quot;: &quot;whosonfirst-data&quot;,
        &quot;name&quot;: &quot;&quot;
    }...
</code></pre>

<p>Adding <code>format=geojson</code> does what you&rsquo;d expect:</p>

<pre><code>{
type: &quot;FeatureCollection&quot;,
features: [
    {
        type: &quot;Feature&quot;,
        geometry: {
            type: &quot;Point&quot;,
            coordinates: [
                0.12401,
                51.495463
            ]
        },
        properties: {
            wof:id: 85785187,
            wof:parent_id: &quot;101750367&quot;,
            wof:name: &quot;Abbey Wood&quot;,
            wof:placetype: &quot;neighbourhood&quot;,
            wof:country: &quot;GB&quot;,
            wof:repo: &quot;whosonfirst-data&quot;,
            name: &quot;&quot;,
            geom:latitude: 51.495463,
            geom:longitude: 0.12401,
            lbl:latitude: 51.488981,
            lbl:longitude: 0.11348
     }
 }...
</code></pre>

<p>&hellip;as does <code>format=csv</code>:</p>

<pre><code>name,wof_country,wof_id,wof_name,wof_parent_id,wof_placetype,wof_repo
,GB,85785187,&quot;Abbey Wood&quot;,101750367,neighbourhood,whosonfirst-data
,GB,85785221,Acton,101750367,neighbourhood,whosonfirst-data
,GB,85785229,Addiscombe,101750367,neighbourhood,whosonfirst-data
,GB,85785259,Aldersbook,101750367,neighbourhood,whosonfirst-data
...
</code></pre>

<p>###mapzen.places.getHierarchiesByLatLon</p>

<p>Get the <a href="https://mapzen.com/documentation/places/methods/#mapzenplacesgethierarchiesbylatlon">hierarchy of a place</a>, from <code>neighbourhood</code> or <code>microhood</code> up to <code>country</code> and <code>continent</code>. Here is the hierarchy for a microhood in Bernal Heights, San Francisco:</p>

<pre><code>https://places.mapzen.com/v1/?
method=mapzen.places.getHierarchiesByLatLon&amp;
latitude=37.74
&amp;longitude=-122.42&amp;
api_key=INSERT-YOUR-API-KEY
</code></pre>

<pre><code>{
hierarchies: [
        {
            microhood_id: &quot;420780693&quot;,
            neighbourhood_id: 85865945,
            continent_id: 102191575,
            country_id: 85633793,
            locality_id: 85922583,
            county_id: 102087579,
            region_id: 85688637
        }
    ],
stat: &quot;ok&quot;
}
</code></pre>

<p>Adding <code>spr=1&amp;extras=name&amp;</code> will give you a more detailed response &ndash; here&rsquo;s a snippet of the <code>neighbourhood</code> details:</p>

<pre><code>    neighbourhood: {
        &quot;wof:id&quot;: 85865945,
        &quot;wof:parent_id&quot;: &quot;85922583&quot;,
        &quot;wof:name&quot;: &quot;Bernal Heights&quot;,
        &quot;wof:placetype&quot;: &quot;neighbourhood&quot;,
        &quot;wof:country&quot;: &quot;US&quot;,
        &quot;wof:repo&quot;: &quot;whosonfirst-data&quot;
    }...
</code></pre>

<p>###mapzen.places.getIntersects</p>

<p>Discover <a href="https://mapzen.com/documentation/places/methods/#mapzen.places.getIntersects">placetypes that intersect a bounding box</a> &ndash; here is the request for counties in <code>-6.6482,38.2448,-4.8118,39.9779</code>:</p>

<pre><code>https://places.mapzen.com/v1/?
method=mapzen.places.getIntersects&amp;
min_latitude=-6.6482&amp;
min_longitude=38.2448&amp;
max_latitude=-4.8118&amp;
max_longitude=39.9779&amp;
placetype=county&amp;
api_key=INSERT-YOUR-API-KEY
</code></pre>

<p>a.k.a. coastal Tanzania:</p>

<pre><code>{
  &quot;places&quot;: [
    {
      &quot;wof:id&quot;: 421188197,
      &quot;wof:parent_id&quot;: 85679651,
      &quot;wof:name&quot;: &quot;Kusini&quot;,
      &quot;wof:placetype&quot;: &quot;county&quot;,
      &quot;wof:country&quot;: &quot;TZ&quot;,
      &quot;wof:repo&quot;: &quot;whosonfirst-data&quot;
    },
    {
      &quot;wof:id&quot;: 421191173,
      &quot;wof:parent_id&quot;: 85679651,
      &quot;wof:name&quot;: &quot;Kati&quot;,
      &quot;wof:placetype&quot;: &quot;county&quot;,
      &quot;wof:country&quot;: &quot;TZ&quot;,
      &quot;wof:repo&quot;: &quot;whosonfirst-data&quot;
    }...
</code></pre>

<p>These methods have <a href="https://mapzen.com/documentation/places/methods/#arguments_8">lots of arguments</a>, and as noted earlier, can return data in exciting formats such as json, geojson, and csv.</p>

<p>If you choose GeoJSON, you can add the API response directly onto a map! In Tangram, here&rsquo;s how you can use <code>mapzen.places.getDescendants</code> to display airports in Africa:</p>

<pre><code>    venues:
        type: GeoJSON
        # url: https://whosonfirst-api.mapzen.com/?method=whosonfirst.places.getNearby
        url: https://places.mapzen.com/v1/?
        url_params:
            method: mapzen.places.getDescendants
            id: 102191573 #africa
            api_key: global.sdk_mapzen_api_key
            placetype: campus
            tags: airport
            format: geojson
            per_page: 500
            extras: wof:tags,wof:concordances,mz:is_current,name:eng_x_variant,oa:type,oa:elevation_ft,wof:name

</code></pre>

<p>Note the <code>extras</code> — this lets you pull in metadata (in this case, airport codes and airport size that we&rsquo;ve concorded with OurAirports and ICAO and IATA) that you can use for labels and display.</p>

<div class="demo-wrapper">
<iframe src="https://mapzen.com/tangram/view/?api=22/1036#2.84/3.73/14.86"></iframe>
</div>

<p><a href="https://mapzen.com/tangram/view/?api=22/1036#5.605/5.148/3.729">Open full screen</a>, and <a href="https://mapzen.com/tangram/play/?api=22/1036#5.605/5.148/3.729">check out the scene file</a> in Tangram Play!</p>

<p>You can learn much more on the <a href="https://mapzen.com/data/places/">Mapzen Places page</a> and <a href="https://mapzen.com/documentation/places/">the documentation</a>. Mapzen Places is part of <a href="https://mapzen.com/pricing/">Mapzen Flex</a>, with clear, predictable pricing and a generous free tier. Sign up for <a href="https://mapzen.com/developers">an API key</a> to get started!</p>

<p><em>Preview image: Sheet printed with parts of map of the world in sections as would be made up into baseball hats. The parts of 4 hats are printed on each sheet. It was designed by Esselte Map Service and company: Interarts and made by Graphic Jackets,  via <a href="https://collection.cooperhewitt.org/objects/18635637/">Cooper Hewitt</a>.</em></p>
</div>
</body>
</html>
