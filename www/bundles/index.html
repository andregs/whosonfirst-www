<?xml version="1.0"?>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Who's On First &#x2014; Bundles</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" type="text/css" href="../css/mapzen.whosonfirst.min.css"/>
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2">

    <h1>Who's On First &#x2014; Bundles</h1>
    <p class="caveat">Bundles (of Who's On First data) are still considered experimental. They are being actively used (by Mapzen itself) but they are a still work in progress so some things may not be quite right, yet.</p>

    <p>Bundles are a collection of GeoJSON formatted files (Who's On First data) grouped by a specific property, like placetype. They allow for people to more easily bulk download a subset of the entire Who's On First dataset. Currently there are only bundles by placetype but eventually we will add a variety of different <q>slices</q> of the data as demand and interest require.</p>
    <p>There is only ever one bundle-per-property at any given moment. When a new bundle is generated it replaces the old one. If you need to test whether a bundle has changed without downloading the bundle itself the best way is to compare the <code>SHA1</code> hash of the meta file for that property.</p>
    <p>For example if the bundle in question <code>wof-region-latest-bundle.tar.bz2</code> then its corresponding meta file will be <code>wof-region-latest.csv</code>.</p>
    <p>You can determine the <code>SHA1</code> hash for the meta file either by downloading the meta file directly and calculating its hash locally or you can download the <code>wof-country-latest.csv.sha1.txt</code> file which is a plain text file containing the value of the hash.</p>

    <!-- See also: https://github.com/whosonfirst/whosonfirst-placetypes/issues/2 -->
    <h2 id="placetypes">Placetypes</h2>

    <h3 id="placetypes-common">Common <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#common-c" target="docs" class="tellmemore" title="tell me more">?</a></small></h3>
    <ul class="bundle-list">
      <li>
        <h4>Continents <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#continent" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-continent-latest-bundle.tar.bz2">wof-continent-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-continent-latest-bundle.tar.bz2.sha1.txt">SHA1</a> | <a href="http://whosonfirst.mapzen.com.s3.amazonaws.com/bundles/wof-continent-latest-bundle.tar.bz2?torrent">torrent</a>)</small>
          </li>
          <li>
            <a href="wof-continent-latest.csv">wof-continent-latest.csv</a>
            <small>(<a href="wof-continent-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>
      <li>
        <h4>Countries <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#country" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-country-latest-bundle.tar.bz2">wof-country-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-country-latest-bundle.tar.bz2.sha1.txt">SHA1</a> | <a href="http://whosonfirst.mapzen.com.s3.amazonaws.com/bundles/wof-country-latest-bundle.tar.bz2?torrent">torrent</a>)</small>
          </li>
          <li>
            <a href="wof-country-latest.csv">wof-country-latest.csv</a>
            <small>(<a href="wof-country-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>
      <li>
        <h4>Regions <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#region" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-region-latest-bundle.tar.bz2">wof-region-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-region-latest-bundle.tar.bz2.sha1.txt">SHA1</a> | <a href="http://whosonfirst.mapzen.com.s3.amazonaws.com/bundles/wof-region-latest-bundle.tar.bz2?torrent">torrent</a>)</small>
          </li>
          <li>
            <a href="wof-region-latest.csv">wof-region-latest.csv</a>
            <small>(<a href="wof-region-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Localities <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#locality" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-locality-latest-bundle.tar.bz2">wof-locality-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-locality-latest-bundle.tar.bz2.sha1.txt">SHA1</a> | <a href="http://whosonfirst.mapzen.com.s3.amazonaws.com/bundles/wof-locality-latest-bundle.tar.bz2?torrent">torrent</a>)</small>
          </li>
          <li>
            <a href="wof-locality-latest.csv">wof-locality-latest.csv</a>
            <small>(<a href="wof-locality-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Neighbourhoods <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#neighbourhood" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-neighbourhood-latest-bundle.tar.bz2">wof-neighbourhood-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-neighbourhood-latest-bundle.tar.bz2.sha1.txt">SHA1</a> | <a href="http://whosonfirst.mapzen.com.s3.amazonaws.com/bundles/wof-neighbourhood-latest-bundle.tar.bz2?torrent">torrent</a>)</small>
          </li>
          <li>
            <a href="wof-neighbourhood-latest.csv">wof-neighbourhood-latest.csv</a>
            <small>(<a href="wof-neighbourhood-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>
    </ul>

   <h3 id="placetypes-common-optional">Common Optional <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#common-optional-co" target="docs" class="tellmemore" title="tell me more">?</a></small></h3>

    <ul class="bundle-list">
      <li>
        <h4>Planets <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#planet" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-planet-latest-bundle.tar.bz2">wof-planet-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-planet-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-planet-latest.csv">wof-planet-latest.csv</a>
            <small>(<a href="wof-planet-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Oceans <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#ocean" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-ocean-latest-bundle.tar.bz2">wof-ocean-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-ocean-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-ocean-latest.csv">wof-ocean-latest.csv</a>
            <small>(<a href="wof-ocean-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Empires <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#empire" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-empire-latest-bundle.tar.bz2">wof-empire-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-empire-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-empire-latest.csv">wof-empire-latest.csv</a>
            <small>(<a href="wof-empire-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Dependencies <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#dependency" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-dependency-latest-bundle.tar.bz2">wof-dependency-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-dependency-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-dependency-latest.csv">wof-dependency-latest.csv</a>
            <small>(<a href="wof-dependency-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Disputed Areas <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#disputed" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-disputed-latest-bundle.tar.bz2">wof-disputed-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-disputed-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-disputed-latest.csv">wof-disputed-latest.csv</a>
            <small>(<a href="wof-disputed-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Marine Areas <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#marinearea" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-marinearea-latest-bundle.tar.bz2">wof-marinearea-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-marinearea-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-marinearea-latest.csv">wof-marinearea-latest.csv</a>
            <small>(<a href="wof-marinearea-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Timezones <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#timezone" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-timezone-latest-bundle.tar.bz2">wof-timezone-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-timezone-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-timezone-latest.csv">wof-timezone-latest.csv</a>
            <small>(<a href="wof-timezone-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Counties <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#county" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-county-latest-bundle.tar.bz2">wof-county-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-county-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-county-latest.csv">wof-county-latest.csv</a>
            <small>(<a href="wof-county-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Local Admins <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#localadmin" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-localadmin-latest-bundle.tar.bz2">wof-localadmin-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-localadmin-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-localadmin-latest.csv">wof-localadmin-latest.csv</a>
            <small>(<a href="wof-localadmin-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Campuses <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#campus" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-campus-latest-bundle.tar.bz2">wof-campus-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-campus-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-campus-latest.csv">wof-campus-latest.csv</a>
            <small>(<a href="wof-campus-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

    </ul>

   <h3 id="placetypes-optional">Optional <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#optional-o" target="docs" title="tell me more" class="tellmemore">?</a></small></h3>

    <ul class="bundle-list">
      <li>
        <h4>Macroregions <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#macroregion" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-macroregion-latest-bundle.tar.bz2">wof-macroregion-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-macroregion-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-macroregion-latest.csv">wof-macroregion-latest.csv</a>
            <small>(<a href="wof-macroregion-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>
      <li>
        <h4>Macrocounties <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#macrocounty" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-macrocounty-latest-bundle.tar.bz2">wof-macrocounty-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-macrocounty-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-macrocounty-latest.csv">wof-macrocounty-latest.csv</a>
            <small>(<a href="wof-macrocounty-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Macrohoods <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#macrohood" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-macrohood-latest-bundle.tar.bz2">wof-macrohood-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-macrohood-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-macrohood-latest.csv">wof-macrohood-latest.csv</a>
            <small>(<a href="wof-macrohood-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

      <li>
        <h4>Microhoods <small><a href="https://github.com/whosonfirst/whosonfirst-placetypes#microhood" target="docs" class="tellmemore" title="tell me more">?</a></small></h4>
        <ul>
          <li>
            <a href="wof-microhood-latest-bundle.tar.bz2">wof-microhood-latest-bundle.tar.bz2</a>
            <small>(<a href="wof-microhood-latest-bundle.tar.bz2.sha1.txt">SHA1</a>)</small>
          </li>
          <li>
            <a href="wof-microhood-latest.csv">wof-microhood-latest.csv</a>
            <small>(<a href="wof-microhood-latest.csv.sha1.txt">SHA1</a>)</small>
          </li>
        </ul>
      </li>

    </ul>

    <h2 id="working-with">Working with Bundles</h2>

    <p>Bundles all have the same directory structure: A single <code>data</code> directory and a <code>wof-PLACETYPE-OR-LATEST-BUNDLE-NAME-latest.csv</code> comma-separated "meta" file. It is left up to individual users of the data to decide how and whether data from multiple bundles should be merged.</p>

    <p>Here is a working example script that will download all the bundles for continents, countries, regions, localities and neighbourhoods and merge the records from each in to a single <code>data</code> folder, located in the directory that the script is run from.</p>

    <p><small>Please note that there is little to no error-checking in the example below so you should adjust this to taste. Also it assumes that you are comfortable working on the command-line and that your computer has copies of the <code>tar</code>, <code>curl</code> and <code>rsync</code> utilities pre-installed (this is true for all Linux and OS X computers).</small></p>

    <pre>
#!/bin/sh

PLACETYPES='continent country region locality neighbourhood'
DATA="data"

if [ ! -d ${DATA} ]
then
    mkdir ${DATA}
fi

for PT in ${PLACETYPES}
do

    BUNDLE="wof-${PT}-latest-bundle"
    COMPRESSED="${BUNDLE}.tar.bz2"

    if [ -e ${COMPRESSED} ]
    then
        echo "remove ${COMPRESSED}"
        rm -i ${COMPRESSED}
    fi

    if [ -d ${BUNDLE} ]
    then
        echo "remove ${BUNDLE}"
        rm -ri ${BUNDLE}
    fi

    echo "fetch ${COMPRESSED}"
    curl -s -o ${COMPRESSED} https://whosonfirst.mapzen.com/bundles/${COMPRESSED}

    echo "expand ${COMPRESSED}"
    tar -xvjf ${COMPRESSED}

    echo "sync ${BUNDLE}"
    rsync -av ${BUNDLE}/data/ ${DATA}/

done
    </pre>

      </div>
    </div>
  </div>
  <!-- <script src="https://mapzen.com/common/styleguide/scripts/mapzen-styleguide.min.js"></script> -->
</body>
